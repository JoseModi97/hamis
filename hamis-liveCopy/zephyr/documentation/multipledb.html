<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Connecting Multiple Databases</title>
<style type="text/css">
<!--
body {
	background-color: #1c1c1b;
	margin-left: 0px;
	margin-top: 0px;
	margin-right: 0px;
	margin-bottom: 0px;
	color: #EEEEEE;
	font-family:Verdana, Arial, Helvetica, sans-serif;
	font-size: 12px;
}

h3
{
	font-size: 18px;
	margin-top: 7px;
	color: #444444;
}

.text_container
{
	line-height:1.5em; 
	padding: 5px; 
	margin-top: 5px; 
	padding-top: 0px;
	border: 1px solid #BBBBBB;
}

a:link
{
	text-decoration: none;
	color: #EEEEEE;
}
a:hover
{
	text-decoration:underline;
}

a:active
{
	color: #FFFF00;
}

a:visited:hover
{
	text-decoration: underline;
	color: #EEEEEE;
}

a:visited
{
	text-decoration: none;
	color: #EEEEEE;
}
.code
{
	font-family: "Lucida Console";
	font-size: 12px;
	background-color:#EEEEEE !important;
	padding: 10px;
	border: 1px solid;
	border-color:#CCCCCC ;
	display: block;
	color: #333333 !important;
}
.hilight {	color: #993300;
}
.hl-brackets {    color: Olive;
}
.hl-code {    color: Gray;
}
.hl-comment {    color: Orange;
}
.hl-identifier {    color: Blue;
}
.hl-inlinedoc {    color: Blue;
}
.hl-inlinetags {    color: Blue;
}
.hl-main {	font-size:14px;
}
.hl-quotes {    color: Darkred;
}
.hl-reserved {    color: Green;
}
.hl-string {    color: Red;
}
.hl-var {    color: Darkblue;
}
.php {	font-family: "Lucida Console";
	background-color:#FFFFFF;
	padding: 5px;
	border: 1px solid;
	border-color:#006666;
	display: block;
	height: 250px;
	overflow: auto;
}
-->
</style></head>

<body>
<table width="100%" border="0" cellspacing="0" cellpadding="5">
  <tr>
    <th colspan="2" scope="col"><div align="left"><img src="ZephyrBanner.jpg" width="520" /></div>      <div align="left"></div></th>
  </tr>
  <tr>
    <td width="23%" valign="top"  style="border-top: 1px solid #CCCCCC; padding-top: 0px;"  ><div align="left" style="padding-left:17px; line-height:1.5em;" >
      <p><a href="index.html">Introduction</a><br />
        <a href="installation.html">Installation</a><br />
        <a href="gettingstarted.html">Getting started</a><br />
        <a href="package.html">Package Definition Reference</a><br />
        <a href="database.html">Connecting to Database</a><br />
        <a href="commondb.html">Common DB Operations </a><br />
        <a href="filter.html">Filter</a><a href="crud.html"></a><a href="pre.html"></a><br />
        <a href="multipledb.html">Handling Multiple Databases</a><br />
        <a href="howto.html">How-Tos</a><br />
        <a href="deployment.html">Deployment</a><br />
        <a href="credit.html">Credit</a><br />
        <a href="feedback.html">Feedback</a><br />
        <a href="changelog.html">Changelog</a></p>
      <p><a href="zephyrAPI/index.html">Zephyr API </a><br />
        <br />
      </p>
    </div></td>
    <td width="77%" valign="top" style="border-top: 1px solid #CCCCCC; padding-top: 0px;" >
	<div align="left" class = 'text_container'>
      <h3>&lt;&lt;-multiple database-&gt;&gt;</h3>
      <p>you can manage multiple databases in your zephyr actions. to use multiple databases just create some instance of abstractdbinfo class. then you just need to pass each instant of abstractdbinfo to DAO for succeessive multiple db operation. </p>
      <p>if you use different providers, then you can use multiple instance of abstract dbinfo as described above. but if you are using same provider, unfortunately you will get multiple database support only if your database provider is mysql. </p>
      <p>right now we are working for multiple database support in SQLite and postgresql. hopefully you will get this support in next release of zephyr. </p>
	</div>
	<div align="left" class = 'text_container'>
      <h3>&lt;&lt;-example for different providers-&gt;&gt;</h3>
      <p>we already said that we need to mutiple instance of dbinfo class which is actually developed by extending abstractdbinfo. in the following example, we will use two dbinfo class, one for mysql and another for sqlite. following is the dbinfo class for mysql database, placed inside &quot;<span class="hilight">helper</span>&quot; folder inside our package. </p>
      <pre><span class="code">
//mysql_db.class.php
&lt;?
class mysql_db extends abstractdbinfo 
{
  public function __construct()
	{
		$this->dbhost = "localhost";
		$this->dbname = "mysql_db";
		$this->dbuser = "root";
		$this->dbpwd = "root";
		$this->dbtype = "mysql";
		$this->persist = 1;
	}
}
?></span></pre>
	  
	  <p>Now we will define another dbinfo class which we will use for SQLite database. we will place this class in &quot;helper&quot; folder inside our package. </p>
	  <pre><span class="code">//sqlite_db.class.php
&lt;?
class sqlite_db extends abstractdbinfo
{
	public function __construct()
	{
		$pm = new packagemanager();
		$package_path = $pm->get_package_path(); //physical path to this package
		$this->dbhost = $package_path."/sqlitedb/";
		$this->dbname = "test.sqlite";
		$this->dbtype = "sqlite";
		$this->persist = 1;
	}	
}
?></span></pre>
	  <p>well, lets use these two dbinfo class inside our action. all you have to do is to pass name of these two dbinfo class explicitely in two instance of DAO. lets see </p>
	  <pre><span class="code">//multipledb_action
//multiple_db.class.php
&lt;?
class sqlite_db extends abstractdbinfo
{
	public function execute()
	{
		$dao_mysql = new DAO("","mysql_db");
		$dao_sqlite = new DAO("","sqlite_db");

        //or you can use your DB domain model while initialization
                $domain1 = new domain1();
		$domain2 = new domain2();
		$dao_mysql = new DAO($domain1,"mysql_db");
		$dao_sqlite = new DAO($domain2,"sqlite_db");		
		
		//$dao->execute("query for mysql db");
		//$dao->execute("query for sqlite db");	
	}	
}
?></span></pre>
<div align="left" class = 'text_container'>
      <h3>&lt;&lt;-example for single providers-&gt;&gt;</h3>
      <p>if your db provider is mysql, then you can manage multiple db from single provider (that is mysql). we are working to provide support for other db engine as well. </p>
      </div>
	</div>
</td>
</tr>
</table>
</body>
</html>